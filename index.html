<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AXON IMPACT GLOBAL</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://www.youtube.com/iframe_api"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        :root { 
            --primary: #2ecc71; 
            --bg-dark: rgba(13, 17, 23, 0.9); 
            --panel: rgba(22, 27, 34, 0.98); 
            --text: #e6edf3; 
            --music: #a333c8; 
            --video: #2185d0; 
            --gold: #fbbd08; 
            --red-yt: #ff0000; 
            --game: #db2828; 
            --task: #3498db; 
            --social: #767676; 
            --wallet: #fbbd08; 
            --invite: #34495e; 
            --airdrop: #f39c12;
            --donate: #e74c3c;
            --tg-color: #0088cc;
            --fb-color: #1877f2;
            --tk-color: #000000;
        }

        body, html { height: 100%; margin: 0; color: var(--text); font-family: 'Segoe UI', sans-serif; background: url('https://i.postimg.cc/pXMzbPsj/20260216-171012-0000.png') no-repeat center center fixed; background-size: cover; display: flex; justify-content: center; align-items: center; overflow: hidden; }
        .overlay-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-dark); z-index: 1; }
        .container { position: relative; z-index: 2; display: flex; flex-direction: column; align-items: center; width: 100%; }
        
        .panel { background: var(--panel); padding: 15px; border-radius: 30px; width: 85%; max-width: 400px; text-align: center; border: 1px solid rgba(46, 204, 113, 0.3); box-shadow: 0 15px 35px rgba(0,0,0,0.8); backdrop-filter: blur(10px); max-height: 92vh; overflow-y: auto; }
        
        .country-stats { position: fixed; top: 10px; right: 10px; background: rgba(0,0,0,0.7); padding: 8px; border-radius: 12px; font-size: 10px; border: 1px solid var(--primary); z-index: 10; pointer-events: none; }
        .country-stats div { display: flex; justify-content: space-between; gap: 10px; margin-bottom: 2px; }

        .hero-img { width: 85%; max-width: 280px; height: 320px; object-fit: cover; border-radius: 40px; margin-bottom: -30px; z-index: 3; box-shadow: 0 0 35px rgba(46, 204, 113, 0.6); animation: pulse 3s infinite ease-in-out; }

        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }

        .btn { display: flex; align-items: center; justify-content: center; gap: 8px; width: 100%; padding: 12px; margin: 8px 0; border: none; border-radius: 18px; font-weight: bold; cursor: pointer; color: white; font-size: 13px; text-transform: uppercase; transition: transform 0.2s; }
        .btn i { font-size: 14px; }
        .btn:active { transform: scale(0.98); }

        .btn-video { background: var(--video); }
        .btn-music { background: var(--music); }
        .btn-social { background: var(--social); }
        .btn-wallet { background: var(--wallet); color: #000; }
        .btn-invite { background: var(--invite); }
        .btn-back { background: #1b1c1d; font-size: 10px; margin-top: 10px; padding: 8px; }

        .btn-airdrop { background: linear-gradient(145deg, #f39c12, #e67e22); border-bottom: 3px solid #d35400; height: 60px; }
        .btn-donate { background: linear-gradient(145deg, #e74c3c, #c0392b); border-bottom: 3px solid #962d22; height: 60px; }
        
        .btn-tg { background: var(--tg-color); }
        .btn-fb { background: var(--fb-color); }
        .btn-tk { background: var(--tk-color); border: 1px solid rgba(255,255,255,0.2); }

        .balance-card { background: rgba(46, 204, 113, 0.05); border-radius: 20px; padding: 10px; margin-top: 15px; border: 1px dashed var(--primary); }
        
        .comment-box { width: 100%; padding: 10px; border-radius: 12px; border: 1px solid var(--music); background: rgba(0,0,0,0.3); color: white; margin-top: 10px; font-size: 12px; font-family: inherit; resize: none; box-sizing: border-box; }
        .my-request { background: rgba(163, 51, 200, 0.2); padding: 8px; border-radius: 10px; margin-top: 5px; font-size: 11px; display: none; border: 1px solid var(--music); text-align: left; }

        .donors-list { background: rgba(0,0,0,0.3); border-radius: 20px; padding: 10px; margin-top: 10px; text-align: left; font-size: 12px; }
        .donor-row { display: flex; justify-content: space-between; padding: 4px 10px; border-bottom: 1px solid rgba(255,255,255,0.05); }

        #video-placeholder { width: 100%; aspect-ratio: 16/9; border-radius: 20px; background: #000; margin-bottom: 10px; }
        .screen { display: none; flex-direction: column; align-items: center; width: 100%; }
        .btn-yt-action { background: var(--red-yt); flex-direction: column; font-size: 11px; line-height: 1.3; }
        .btn-upload { background: var(--gold); color: #000; display: none; border: 2px solid #000; }

        /* ESTILOS DEL JUEGO CANDY CRUSH (SIN TOCAR LO ANTERIOR) */
        .grid-match { display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; width: 320px; margin: 10px auto; background: rgba(0,0,0,0.5); padding: 8px; border-radius: 15px; border: 1px solid var(--primary); }
        .cell-match { width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; font-size: 20px; cursor: pointer; border-radius: 8px; background: rgba(255,255,255,0.05); transition: 0.2s; }
        .cell-match.selected { background: var(--gold); transform: scale(1.1); }
        @keyframes explode-match { 0% { transform: scale(1); } 50% { transform: scale(1.5); opacity: 0.5; } 100% { transform: scale(0); } }
        .exploding { animation: explode-match 0.4s forwards; }
    </style>
</head>
<body>
    <div class="overlay-bg"></div>

    <div class="country-stats">
        <b style="color: var(--primary); display: block; margin-bottom: 4px;">USUARIOS HOY</b>
        <div><span>üá®üá¥ Colombia</span> <span>124</span></div>
        <div><span>üáªüá™ Venezuela</span> <span>89</span></div>
        <div><span>üá™üá∏ Espa√±a</span> <span>45</span></div>
        <div><span>üá≤üáΩ M√©xico</span> <span>67</span></div>
    </div>

    <div class="container">
        
        <div id="screenStart" class="screen" style="display: flex;">
            <img src="https://i.postimg.cc/pXMzbPsj/20260216-171012-0000.png" class="hero-img">
            <div class="panel" style="padding-top: 40px;">
                <h2 style="color: var(--primary); margin: 0; font-size: 20px;">AXON IMPACT GLOBAL</h2>
                <p style="font-size: 13px; line-height: 1.4; margin: 10px 0;">Ayudando a personas necesitadas y animales de la calle con Blockchain.</p>
                <button onclick="nav('screenMenu')" class="btn" style="background: var(--primary); font-size: 14px;">ENTRAR A MISIONES</button>
            </div>
        </div>

        <div id="screenMenu" class="screen">
            <div class="panel">
                <h3 style="margin-bottom: 15px; font-size: 16px;">MISIONES ACTIVAS ü¶¥</h3>
                
                <button onclick="nav('screenMatchGame')" class="btn" style="background: linear-gradient(45deg, #f1c40f, #d35400); border: 2px solid white;">
                    <i class="fa-solid fa-star"></i> JUGAR CANDY BITCOIN
                </button>

                <button onclick="alert('Pr√≥ximamente: Cobro de Airdrop')" class="btn btn-airdrop">
                    <i class="fa-solid fa-coins"></i> COBRAR AIRDROP
                </button>
                <button onclick="alert('¬°Gracias por tu apoyo!')" class="btn btn-donate">
                    <i class="fa-solid fa-heart"></i> DONAR GANANCIAS
                </button>

                <div class="donors-list">
                    <div style="font-weight: bold; margin-bottom: 5px; color: var(--primary); text-align: center; font-size: 11px;">√öLTIMAS DONACIONES (TG)</div>
                    <div class="donor-row"><span>@User_Telegram1</span> <span>150 ü¶¥</span></div>
                    <div class="donor-row"><span>@CryptoHelp</span> <span>500 ü¶¥</span></div>
                </div>

                <div style="margin: 15px 0; border-top: 1px solid rgba(255,255,255,0.1);"></div>

                <button onclick="nav('screenVideoList')" class="btn btn-video"><i class="fa-solid fa-video"></i> VIDEOS</button>
                <button onclick="nav('screenMusicList')" class="btn btn-music"><i class="fa-solid fa-music"></i> M√öSICA</button>
                <button onclick="nav('screenSocial')" class="btn btn-social"><i class="fa-solid fa-globe"></i> REDES SOCIALES</button>
                <button onclick="alert('Vincula tu Wallet')" class="btn btn-wallet"><i class="fa-solid fa-gem"></i> VINCULAR WALLET</button>
                <button onclick="mostrarMiLink()" class="btn btn-invite"><i class="fa-solid fa-link"></i> INVITAR AMIGOS</button>
                
                <div class="balance-card">
                    <span style="font-size: 11px; opacity: 0.8;">TU SALDO TOTAL</span>
                    <div style="font-size: 28px; font-weight: bold; color: var(--primary);"><span id="coinCount">0</span> ü¶¥</div>
                </div>
            </div>
        </div>

        <div id="screenMatchGame" class="screen">
            <div class="panel">
                <h3 style="color:var(--gold); margin:0;">CANDY BITCOIN</h3>
                <div style="display:flex; justify-content:space-between; font-size:12px; margin:5px 0;">
                    <span>PUNTOS: <b id="matchScore">0</b></span>
                    <span>MOVS: <b id="matchMoves">20</b></span>
                </div>
                <div id="gridMatch" class="grid-match"></div>
                <button onclick="nav('screenMenu')" class="btn btn-back">SALIR DEL JUEGO</button>
            </div>
        </div>

        <div id="screenVideoList" class="screen">
            <div class="panel">
                <h3 style="color: var(--video); font-size: 16px;">BIBLIOTECA DE VIDEOS</h3>
                <div id="videoListContainer" style="max-height: 250px; overflow-y: auto;"></div>
                <button onclick="nav('screenMenu')" class="btn btn-back">VOLVER AL MEN√ö</button>
            </div>
        </div>

        <div id="screenMusicList" class="screen">
            <div class="panel">
                <h3 style="color: var(--music); font-size: 16px;">BIBLIOTECA MUSICAL</h3>
                <div id="musicListContainer" style="max-height: 200px; overflow-y: auto;"></div>
                <textarea id="musicComment" class="comment-box" rows="2" placeholder="¬øQu√© canci√≥n deseas?"></textarea>
                <button id="btnSendMusic" onclick="sendMusicRequest()" class="btn btn-music">ENVIAR SUGERENCIA</button>
                <button onclick="nav('screenMenu')" class="btn btn-back">VOLVER AL MEN√ö</button>
            </div>
        </div>

        <div id="screenSocial" class="screen">
            <div class="panel">
                <h3 style="font-size: 16px;">NUESTRAS REDES</h3>
                <button onclick="window.open('https://t.me/TuCanal', '_blank')" class="btn btn-tg"><i class="fa-brands fa-telegram"></i> TELEGRAM</button>
                <button onclick="window.open('https://facebook.com/TuPagina', '_blank')" class="btn btn-fb"><i class="fa-brands fa-facebook"></i> FACEBOOK</button>
                <button onclick="window.open('https://tiktok.com/@TuUsuario', '_blank')" class="btn btn-tk"><i class="fa-brands fa-tiktok"></i> TIKTOK</button>
                <button onclick="nav('screenMenu')" class="btn btn-back">VOLVER</button>
            </div>
        </div>

        <div id="screenPlayer" class="screen">
            <div class="panel">
                <h3 id="misionTitle" style="font-size: 15px;">---</h3>
                <div id="video-placeholder"></div>
                <button id="btnInteract" class="btn btn-yt-action"><span>ABRIR YOUTUBE</span></button>
                <label for="fileProof" id="labelUpload" class="btn btn-upload"><i class="fa-solid fa-image"></i> CARGAR CAPTURA</label>
                <input type="file" id="fileProof" accept="image/*" onchange="validarTodo()" style="display:none;">
                <button onclick="pararMision()" class="btn btn-back">VOLVER</button>
            </div>
        </div>
    </div>

    <script>
        // LOGICA DE TU CODIGO ORIGINAL
        let coins = 0, player, currentPoints = 0, videoFin = false;
        const listadoVideos = [{ id: 'wC_sOpQjvWE', titulo: 'La Plena', artista: 'Beele', puntos: 10 }];
        const listadoCanciones = [{ id: 'HL9VoQ-er_U', titulo: 'No tiene sentido', artista: 'Beele', puntos: 5 }];

        function nav(id) {
            document.querySelectorAll('.screen').forEach(s => s.style.display = 'none');
            document.getElementById(id).style.display = 'flex';
            if(id === 'screenMatchGame') initMatchGame();
            if(id === 'screenMusicList') renderList('musicListContainer', listadoCanciones);
            if(id === 'screenVideoList') renderList('videoListContainer', listadoVideos);
            document.getElementById('coinCount').innerText = coins;
        }

        // --- JUEGO CANDY BITCOIN (MATCH 3) ---
        let matchMoves = 20, matchScore = 0, squares = [], firstClick = null;
        const icons = ['‚Çø', '‚ù§Ô∏è', 'üëõ', 'üê∂', 'üíé'];

        function initMatchGame() {
            matchMoves = 20; matchScore = 0; squares = []; firstClick = null;
            const grid = document.getElementById('gridMatch'); grid.innerHTML = '';
            for(let i=0; i<49; i++) {
                const sq = document.createElement('div'); sq.className = 'cell-match'; sq.id = i;
                sq.innerHTML = icons[Math.floor(Math.random()*icons.length)];
                sq.onclick = () => clickMatch(sq); grid.appendChild(sq); squares.push(sq);
            }
            updateMatchUI();
        }

        function clickMatch(sq) {
            if(!firstClick) { firstClick = sq; sq.classList.add('selected'); }
            else {
                let id1 = parseInt(firstClick.id), id2 = parseInt(sq.id);
                if([id1-1, id1+1, id1-7, id1+7].includes(id2)) {
                    let tmp = firstClick.innerHTML; firstClick.innerHTML = sq.innerHTML; sq.innerHTML = tmp;
                    matchMoves--; checkMatches();
                }
                firstClick.classList.remove('selected'); firstClick = null;
                updateMatchUI();
                if(matchMoves <= 0) { Swal.fire('Fin', 'Ganaste '+matchScore+' puntos', 'info'); coins += Math.floor(matchScore/10); nav('screenMenu'); }
            }
        }

        function checkMatches() {
            for(let i=0; i<49; i++) {
                if(i%7 < 5 && squares[i].innerHTML === squares[i+1].innerHTML && squares[i].innerHTML === squares[i+2].innerHTML) {
                    matchScore += 50; squares[i].classList.add('exploding'); squares[i+1].classList.add('exploding'); squares[i+2].classList.add('exploding');
                }
            }
            setTimeout(() => squares.forEach(s => { if(s.classList.contains('exploding')) { s.innerHTML = icons[Math.floor(Math.random()*icons.length)]; s.classList.remove('exploding'); } }), 400);
        }

        function updateMatchUI() { document.getElementById('matchScore').innerText = matchScore; document.getElementById('matchMoves').innerText = matchMoves; }

        // --- RESTO DE TUS FUNCIONES ORIGINALES ---
        function renderList(id, list) {
            const container = document.getElementById(id); container.innerHTML = '';
            list.forEach(item => {
                const div = document.createElement('div'); div.style = "padding:8px; border-bottom:1px solid #333; cursor:pointer;";
                div.innerHTML = `<b>${item.titulo}</b> +${item.puntos} ü¶¥`;
                div.onclick = () => cargarMision(item.id, item.puntos, item.titulo); container.appendChild(div);
            });
        }
        function cargarMision(id, pts, t) {
            currentPoints = pts; videoFin = false; document.getElementById('misionTitle').innerText = t;
            nav('screenPlayer');
            if(player) player.loadVideoById(id);
            else player = new YT.Player('video-placeholder', { videoId: id, events: { 'onStateChange': (e) => { if(e.data === 0) { videoFin = true; document.getElementById('labelUpload').style.display='flex'; } } } });
        }
        function validarTodo() { if(videoFin) { coins += currentPoints; nav('screenMenu'); } }
        function mostrarMiLink() { navigator.clipboard.writeText(window.location.href); alert("Copiado"); }
        function pararMision() { if(player) player.stopVideo(); nav('screenMenu'); }
    </script>
</body>
</html>

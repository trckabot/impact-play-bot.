<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AXON IMPACT GLOBAL</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        :root { --primary: #2ecc71; --bg-dark: rgba(13, 17, 23, 0.9); --panel: rgba(22, 27, 34, 0.98); --text: #e6edf3; --music: #8a2be2; --video: #1f6feb; --gold: #f1c40f; --orange: #e67e22; --game: #e74c3c; --task: #3498db; --social: #95a5a6; }
        body, html { height: 100%; margin: 0; color: var(--text); font-family: 'Segoe UI', sans-serif; background: url('https://i.postimg.cc/pXMzbPsj/20260216-171012-0000.png') no-repeat center center fixed; background-size: cover; display: flex; justify-content: center; align-items: center; overflow: hidden; }
        .overlay-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-dark); z-index: 1; }
        .container { position: relative; z-index: 2; display: flex; flex-direction: column; align-items: center; width: 100%; }
        .app-logo { width: 70%; max-width: 220px; filter: drop-shadow(0 0 15px rgba(46, 204, 113, 0.5)); margin-bottom: 10px; border-radius: 20px; }
        .panel { background: var(--panel); padding: 25px; border-radius: 30px; width: 85%; max-width: 380px; text-align: center; border: 1px solid rgba(46, 204, 113, 0.3); box-shadow: 0 15px 35px rgba(0,0,0,0.8); backdrop-filter: blur(10px); max-height: 85vh; overflow-y: auto; }
        .btn { display: block; width: 100%; padding: 14px; margin: 10px 0; border: none; border-radius: 15px; font-weight: bold; cursor: pointer; color: white; transition: 0.3s; font-size: 13px; text-transform: uppercase; box-sizing: border-box; }
        .btn-green { background: var(--primary); }
        .btn-video { background: var(--video); }
        .btn-music { background: var(--music); }
        .btn-game { background: var(--game); }
        .btn-task { background: var(--task); }
        .btn-gold { background: var(--gold); color: #000; box-shadow: 0 0 10px rgba(241, 196, 15, 0.4); }
        .btn-orange { background: var(--orange); }
        .btn-back { background: #333; font-size: 11px; }
        input { width: 100%; background: rgba(13, 17, 23, 0.8); color: white; border: 1px solid #30363d; border-radius: 10px; padding: 12px; margin: 8px 0; box-sizing: border-box; }
        .screen { display: none; width: 100%; flex-direction: column; align-items: center; }
        #screenStart { display: flex; }
        .welcome-text { font-size: 17px; line-height: 1.4; margin: 15px 0; color: #fff; }
        .balance-card { background: rgba(46, 204, 113, 0.1); border-radius: 15px; padding: 15px; margin-top: 15px; border: 1px dashed var(--primary); }
    </style>
</head>
<body>
    <div class="overlay-bg"></div>
    <div class="container">
        
        <div id="screenStart" class="screen">
            <img src="https://i.postimg.cc/pXMzbPsj/20260216-171012-0000.png" class="app-logo">
            <div class="panel">
                <h2 style="color: var(--primary); margin-top: 0;">AXON IMPACT</h2>
                <p class="welcome-text">
                    Ayudando a personas necesitadas y animales de la calle con el poder de Blockchain.
                </p>
                <button onclick="nav('screenMenu')" class="btn btn-green">COMENZAR A ACUMULAR</button>
            </div>
        </div>

        <div id="screenMenu" class="screen">
            <div class="panel">
                <h3 style="margin:0 0 10px 0;">MISIONES ACTIVAS Υ</h3>
                <button onclick="nav('folderVideo')" class="btn btn-video"> VIDEOS</button>
                <button onclick="nav('folderMusic')" class="btn btn-music"> MSICA</button>
                <button onclick="nav('folderGames')" class="btn btn-game"> JUEGOS</button>
                <button onclick="nav('folderTasks')" class="btn btn-task"> TAREAS</button>
                <button onclick="nav('folderSocial')" class="btn" style="background: #95a5a6;"> REDES SOCIALES</button>
                
                <hr style="border: 0.5px solid #333; margin: 15px 0;">
                
                <button onclick="checkWalletNav()" class="btn btn-gold"> VINCULAR WALLET (AIRDROP)</button>
                <button onclick="nav('screenDonar')" class="btn btn-orange"> DONAR A LA CAUSA</button>
                <button onclick="mostrarMiLink()" class="btn" style="background:#34495e;"> INVITAR AMIGOS</button>
                
                <div class="balance-card">
                    <span style="font-size: 12px; opacity: 0.8;">TU SALDO TOTAL</span>
                    <div style="font-size: 26px; font-weight: bold; color: var(--primary);"><span id="coinCount">0</span> Υ</div>
                </div>
            </div>
        </div>

        <div id="screenWallet" class="screen">
            <div class="panel">
                <h2 style="color: var(--gold);">AIRDROP CONFIG</h2>
                <p style="font-size: 12px; margin-bottom: 15px;">Vincula tus direcciones para recibir el token de AXON IMPACT.</p>
                <input type="text" id="regName" placeholder="Crea un nombre de usuario">
                <input type="text" id="regBTC" placeholder="Direcci贸n BTC">
                <input type="text" id="regUSDT" placeholder="Direcci贸n USDT (TRC20)">
                <button onclick="vincularWallet()" class="btn btn-green">CONFIRMAR VINCULACIN</button>
                <button onclick="nav('screenMenu')" class="btn btn-back">VOLVER</button>
            </div>
        </div>

        <div id="folderVideo" class="screen"><div class="panel"><h3>Videos</h3><button onclick="sumarPuntos(10)" class="btn btn-video">VER (+10 Υ)</button><button onclick="nav('screenMenu')" class="btn btn-back">VOLVER</button></div></div>
        <div id="folderSocial" class="screen"><div class="panel"><h3>Social</h3><button onclick="window.open('https://t.me/TuCanal')" class="btn" style="background:#0088cc">TELEGRAM</button><button onclick="nav('screenMenu')" class="btn btn-back">VOLVER</button></div></div>
        <div id="screenDonar" class="screen"><div class="panel"><h3>Donaciones</h3><button onclick="donarSaldo()" class="btn btn-orange">DONAR SALDO</button><button onclick="nav('screenMenu')" class="btn btn-back">VOLVER</button></div></div>

    </div>

    <script>
        const SUPABASE_URL = 'https://ywkcnxhlptqagwxjnygx.supabase.co';
        const SUPABASE_KEY = 'sb_publishable_Pp5vR4_C_8FPhgrFItKpPQ_gt6f6z3k';
        const _supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        let coins = 0;
        let walletLinked = false;
        let userName = "";
        const urlParams = new URLSearchParams(window.location.search);
        const refPor = urlParams.get('ref');

        function nav(id) {
            document.querySelectorAll('.screen').forEach(s => s.style.display = 'none');
            document.getElementById(id).style.display = 'flex';
        }

        function sumarPuntos(pts) {
            coins += pts;
            document.getElementById('coinCount').innerText = coins;
            alert("隆Puntos acumulados!");
            nav('screenMenu');
        }

        function checkWalletNav() {
            if (!walletLinked) nav('screenWallet');
            else alert("Wallet vinculada correctamente. 隆Espera al pr贸ximo Airdrop!");
        }

        async function vincularWallet() {
            const n = document.getElementById('regName').value;
            const btc = document.getElementById('regBTC').value;
            const usdt = document.getElementById('regUSDT').value;
            if (n && btc && usdt) {
                const { error } = await _supabase.from('usuarios_registrados').insert([{ nombre_usuario: n, documento_id: btc, pais: usdt, monedas: coins, referido_por: refPor }]);
                if (error) alert("Este nombre ya est谩 en uso.");
                else { walletLinked = true; userName = n; alert("隆xito! Wallet vinculada para el Airdrop."); nav('screenMenu'); }
            } else alert("Por favor, llena todos los campos.");
        }

        function mostrarMiLink() {
            if (!walletLinked) { alert("Vincula tu wallet primero para obtener tu link de invitaci贸n."); return; }
            const link = window.location.origin + window.location.pathname + "?ref=" + userName;
            navigator.clipboard.writeText(link);
            alert("Link de invitado copiado.");
        }

        async function donarSaldo() {
            if (coins <= 0) return;
            await _supabase.from('historial_donaciones').insert([{ nombre_usuario: walletLinked ? userName : "An贸nimo", monto: coins }]);
            coins = 0;
            document.getElementById('coinCount').innerText = "0";
            alert("隆Gracias por tu gran coraz贸n! Has donado tus puntos a la causa.");
        }
    </script>
</body>
</html>

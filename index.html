<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AXON IMPACT GLOBAL</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        :root { --primary: #2ecc71; --bg: #0d1117; --panel: #161b22; --text: #e6edf3; --music: #8a2be2; }
        
        body, html { 
            height: 100%; margin: 0; background: var(--bg); color: var(--text); font-family: 'Segoe UI', Roboto, sans-serif;
            display: flex; justify-content: center; align-items: flex-start; overflow-x: hidden; padding-top: 20px;
        }

        /* DISEÃ‘O DE IMPACTO PARA EL LOGO */
        .app-logo {
            width: 85%; /* Grande y llamativo */
            max-width: 320px;
            height: auto;
            filter: drop-shadow(0 0 20px rgba(46, 204, 113, 0.6));
            margin-bottom: -30px;
            z-index: 2;
            transition: transform 0.3s ease;
        }

        .container {
            display: flex; flex-direction: column; align-items: center; width: 100%;
        }

        .panel { 
            background: linear-gradient(180deg, rgba(22,27,34,0.5) 0%, rgba(22,27,34,1) 30%);
            padding: 40px 25px 30px 25px; border-radius: 30px; width: 85%; max-width: 380px; 
            text-align: center; border: 1px solid rgba(48, 54, 61, 0.5);
            box-shadow: 0 15px 35px rgba(0,0,0,0.7);
        }

        .btn { display: block; width: 100%; padding: 18px; margin: 15px 0; border: none; border-radius: 15px; font-weight: bold; cursor: pointer; color: white; transition: 0.3s; font-size: 16px; text-transform: uppercase; letter-spacing: 1px; }
        .btn-green { background: var(--primary); box-shadow: 0 4px 15px rgba(46, 204, 113, 0.3); }
        .btn-green:active { transform: scale(0.98); }
        
        input { width: 100%; background: #0d1117; color: white; border: 1px solid #30363d; border-radius: 12px; padding: 14px; margin: 10px 0; box-sizing: border-box; }
        
        .song-list { max-height: 200px; overflow-y: auto; margin-top: 15px; border-radius: 12px; background: rgba(13, 17, 23, 0.8); }
        .song-item { padding: 15px; border-bottom: 1px solid #222; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
        
        #player { width: 100%; border-radius: 15px; height: 230px; background: #000; margin-top: 15px; border: 1px solid var(--primary); }

        /* Pantallas */
        .screen { display: none; width: 100%; flex-direction: column; align-items: center; }
        #screen1 { display: flex; }

        /* Modales */
        #customModal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #1c2128; padding: 30px; border-radius: 25px; border: 2px solid var(--primary); z-index: 10000; width: 80%; text-align: center; }
        .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 9999; }
    </style>
</head>
<body>

    <div id="overlay" class="overlay"></div>
    <div id="customModal">
        <h2 id="mTitle">ðŸŒŸ</h2>
        <p id="mMsg" style="font-size: 16px;"></p>
        <button class="btn btn-green" onclick="closeModal()">CONTINUAR</button>
    </div>

    <div class="container">
        <div id="screen1" class="screen">
            <img src="https://i.postimg.cc/mD8VfTnt/1000295654.jpg" alt="Logo AXON" class="app-logo">
            <div class="panel">
                <h1 style="color: var(--primary); margin: 0; font-size: 26px;">AXON IMPACT GLOBAL</h1>
                <p style="font-size: 15px; color: #8b949e; line-height: 1.6; margin: 15px 0;">
                    Uniendo <b>Finanzas</b> y <b>Blockchain</b> para rescatar animales y ayudar a personas sin hogar [cite: 2026-02-14].
                </p>
                <button onclick="nav('screen2')" class="btn btn-green">ENTRAR A MISIONES</button>
            </div>
        </div>

        <div id="screen2" class="screen">
            <div class="panel">
                <h3 style="margin:0 0 20px 0;">MISIONES ACTIVAS ðŸ¦´</h3>
                
                <div style="margin-bottom: 25px;">
                    <h4 style="color: var(--music); margin-bottom: 10px;">ðŸŽµ MÃšSICA & FINANZAS</h4>
                    <input type="text" id="searchSong" placeholder="ðŸ” Buscar canciÃ³n o activo..." onkeyup="filterSongs()">
                    <div class="song-list" id="songList">
                        <div class="song-item" onclick="verContenido('jNQXAC9IVRw', 'Bull Market Vibes: ReggaetÃ³n Mix', 15)">
                            <span>ðŸŽ§ Bull Market Mix</span> <span style="color:var(--primary)">+15ðŸ¦´</span>
                        </div>
                        <div class="song-item" onclick="verContenido('5qap5aO4i9A', 'BTC Halving Rock: Solidaridad', 15)">
                            <span>ðŸŽ§ BTC Rock</span> <span style="color:var(--primary)">+15ðŸ¦´</span>
                        </div>
                    </div>
                </div>

                <p style="font-size: 20px; font-weight: bold;">MIS MONEDAS: <span id="coinCount" style="color:var(--primary)">0</span></p>
                <button onclick="nav('screen1')" class="btn" style="background:#333; font-size: 12px;">SALIR</button>
            </div>
        </div>

        <div id="screen3" class="screen">
            <div class="panel">
                <h4 id="activeTitle" style="color: var(--primary); margin: 0;">Reproduciendo...</h4>
                <div id="player"></div>
                <button id="btnVerify" class="btn btn-green" style="display:none;">âœ… COBRAR RECOMPENSA</button>
                <button onclick="nav('screen2')" class="btn" style="background:#333;">VOLVER</button>
            </div>
        </div>
    </div>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        let player, isPlaying = false, lastTime = 0, coins = 0, currentPoints = 0;

        function nav(id) {
            document.querySelectorAll('.screen').forEach(s => s.style.display = 'none');
            document.getElementById(id).style.display = 'flex';
        }

        function verContenido(id, titulo, pts) {
            currentPoints = pts;
            lastTime = 0;
            document.getElementById('activeTitle').innerText = titulo;
            nav('screen3');
            if (player && player.loadVideoById) player.loadVideoById(id);
        }

        function filterSongs() {
            let input = document.getElementById('searchSong').value.toLowerCase();
            let items = document.querySelectorAll('.song-item');
            items.forEach(item => {
                item.style.display = item.innerText.toLowerCase().includes(input) ? "flex" : "none";
            });
        }

        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                videoId: '',
                playerVars: { 'modestbranding': 1, 'rel': 0, 'playsinline': 1, 'controls': 0 },
                events: {
                    'onStateChange': (e) => {
                        if (e.data == YT.PlayerState.PLAYING) { isPlaying = true; startSecurity(); }
                        else isPlaying = false;
                        if (e.data == YT.PlayerState.ENDED) document.getElementById('btnVerify').style.display = 'block';
                    }
                }
            });
        }

        function startSecurity() {
            const check = setInterval(() => {
                if (player && isPlaying) {
                    let curr = player.getCurrentTime();
                    if (curr > lastTime + 2) player.seekTo(lastTime);
                    else lastTime = curr;
                } else clearInterval(check);
            }, 1000);
        }

        document.getElementById('btnVerify').onclick = () => {
            coins += currentPoints;
            document.getElementById('coinCount').innerText = coins;
            showModal("Â¡IMPACTO LOGRADO!", `Has generado ${currentPoints} monedas para el proyecto AXON. Gracias por ayudar a personas y animales.`);
            document.getElementById('btnVerify').style.display = 'none';
        };

        function showModal(t, m) {
            document.getElementById('mTitle').innerText = t;
            document.getElementById('mMsg').innerText = m;
            document.getElementById('customModal').style.display = 'block';
            document.getElementById('overlay').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('customModal').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
            nav('screen2');
        }
    </script>
</body>
</html>

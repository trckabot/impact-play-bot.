<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AXON IMPACT GLOBAL</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://www.youtube.com/iframe_api"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        :root { 
            --primary: #2ecc71; 
            --bg-dark: rgba(13, 17, 23, 0.9); 
            --panel: rgba(22, 27, 34, 0.98); 
            --text: #e6edf3; 
            --music: #a333c8; 
            --video: #2185d0; 
            --gold: #fbbd08; 
            --red-yt: #ff0000; 
            --game: #db2828; 
            --social: #767676; 
            --invite: #34495e; 
            --airdrop: #f39c12;
            --donate: #e74c3c;
        }

        body, html { height: 100%; margin: 0; color: var(--text); font-family: 'Segoe UI', sans-serif; background: url('https://i.postimg.cc/pXMzbPsj/20260216-171012-0000.png') no-repeat center center fixed; background-size: cover; display: flex; justify-content: center; align-items: center; overflow: hidden; }
        .overlay-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-dark); z-index: 1; }
        .container { position: relative; z-index: 2; display: flex; flex-direction: column; align-items: center; width: 100%; }
        
        .panel { background: var(--panel); padding: 15px; border-radius: 30px; width: 85%; max-width: 400px; text-align: center; border: 1px solid rgba(46, 204, 113, 0.3); box-shadow: 0 15px 35px rgba(0,0,0,0.8); backdrop-filter: blur(10px); max-height: 92vh; overflow-y: auto; }
        
        /* SEGURIDAD BOTONES */
        .btn { 
            display: flex; align-items: center; justify-content: center; gap: 8px; width: 100%; padding: 12px; margin: 8px 0; border: none; border-radius: 18px; font-weight: bold; cursor: pointer; color: white; font-size: 13px; text-transform: uppercase; transition: transform 0.2s;
            user-select: none; -webkit-tap-highlight-color: transparent; touch-action: manipulation;
        }
        .btn:active { transform: scale(0.95); }

        /* RANKING Y ESTAD√çSTICAS */
        .mini-card { background: rgba(255,255,255,0.05); padding: 10px; border-radius: 15px; margin: 10px 0; border: 1px solid rgba(46, 204, 113, 0.2); font-size: 11px; text-align: left; }
        .hero-row { display: flex; justify-content: space-between; padding: 4px 0; border-bottom: 1px solid rgba(255,255,255,0.05); }

        .hero-img { width: 85%; max-width: 280px; height: 320px; object-fit: cover; border-radius: 40px; margin-bottom: -30px; z-index: 3; box-shadow: 0 0 35px rgba(46, 204, 113, 0.6); }
        .screen { display: none; flex-direction: column; align-items: center; width: 100%; }
        #video-placeholder { width: 100%; aspect-ratio: 16/9; border-radius: 20px; background: #000; margin-bottom: 10px; }
    </style>
</head>
<body>
    <div class="overlay-bg"></div>

    <div class="container">
        
        <div id="screenStart" class="screen" style="display: flex;">
            <img src="https://i.postimg.cc/pXMzbPsj/20260216-171012-0000.png" class="hero-img">
            <div class="panel" style="padding-top: 40px;">
                <h2 style="color: var(--primary); margin: 0; font-size: 20px;">AXON IMPACT GLOBAL</h2>
                <p style="font-size: 13px; margin: 10px 0;">Ayudando a personas y animales con Blockchain.</p>
                <button onclick="solicitarRegistro()" class="btn" style="background: var(--primary); font-size: 14px; position: relative; z-index: 999;">
                    ENTRAR A MISIONES
                </button>
            </div>
        </div>

        <div id="screenMenu" class="screen">
            <div class="panel">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                    <span style="font-size: 11px; color: var(--gold); font-weight: bold;"><i class="fa-solid fa-fire"></i> RACHA: 1 D√çAS</span>
                    <span style="font-size: 11px; color: var(--primary); font-weight: bold;"><span id="coinCountTop">0</span> ü¶¥</span>
                </div>

                <div class="mini-card">
                    <div style="color: var(--primary); font-weight: bold; margin-bottom: 5px; border-bottom: 1px solid var(--primary); text-align: center;">üèÜ TOP H√âROES DE LA SEMANA</div>
                    <div class="hero-row"><span>1. @Alex_Charity</span> <span>2,500 ü¶¥</span></div>
                    <div class="hero-row"><span>2. @Marta_Pets</span> <span>1,820 ü¶¥</span></div>
                    <div id="miFilaRanking" class="hero-row" style="color: var(--gold); font-weight: bold;"><span>3. T√∫</span> <span id="misPuntosRank">0 ü¶¥</span></div>
                </div>

                <button onclick="nav('screenVideoList')" class="btn" style="background: var(--video);"><i class="fa-solid fa-video"></i> VER VIDEOS</button>
                <button onclick="nav('screenMusicList')" class="btn" style="background: var(--music);"><i class="fa-solid fa-music"></i> M√öSICA</button>
                <button onclick="nav('screenSocial')" class="btn" style="background: #767676;"><i class="fa-solid fa-globe"></i> REDES</button>
                <button onclick="alert('Link copiado')" class="btn" style="background: #34495e;"><i class="fa-solid fa-link"></i> INVITAR</button>
                
                <div style="background: rgba(46, 204, 113, 0.1); padding: 10px; border-radius: 20px; margin-top: 10px; border: 1px dashed var(--primary);">
                    <span style="font-size: 10px; opacity: 0.8;">SALDO DE AYUDA</span>
                    <div style="font-size: 24px; font-weight: bold; color: var(--primary);"><span id="coinCount">0</span> ü¶¥</div>
                </div>
            </div>
        </div>

        <div id="screenPlayer" class="screen">
            <div class="panel">
                <h3 id="misionTitle" style="font-size: 15px;">---</h3>
                <div id="video-placeholder"></div>
                <div style="margin-bottom: 10px;">
                    <label style="font-size: 10px; color: var(--primary); display: flex; align-items: center; justify-content: center; gap: 5px; cursor: pointer;">
                        <input type="checkbox" id="dataSaver" onchange="toggleDataSaver()"> üìâ ACTIVAR AHORRO DE DATOS
                    </label>
                </div>
                <button onclick="abrirYoutube()" class="btn" style="background: var(--red-yt);">ABRIR YOUTUBE</button>
                <p id="msgInstruccion" style="font-size: 11px; color: var(--gold); font-weight: bold;">‚ö†Ô∏è Da Like y Comenta. Sube captura al terminar.</p>
                <label for="fileProof" id="labelUpload" class="btn" style="background: var(--gold); color: black; display: none;"><i class="fa-solid fa-image"></i> CARGAR CAPTURA</label>
                <input type="file" id="fileProof" accept="image/*" onchange="validarTodo()" style="display:none;">
                <button onclick="pararMision()" class="btn" style="background: #1b1c1d;">VOLVER</button>
            </div>
        </div>

        <div id="screenVideoList" class="screen"><div class="panel"><h3>VIDEOS</h3><div id="videoListContainer"></div><button onclick="nav('screenMenu')" class="btn" style="background: #1b1c1d;">VOLVER</button></div></div>
        <div id="screenMusicList" class="screen"><div class="panel"><h3>M√öSICA</h3><div id="musicListContainer"></div><button onclick="nav('screenMenu')" class="btn" style="background: #1b1c1d;">VOLVER</button></div></div>
        <div id="screenSocial" class="screen"><div class="panel"><h3>REDES</h3><button onclick="window.open('https://t.me/AxonImpact')" class="btn" style="background:#0088cc">TELEGRAM</button><button onclick="nav('screenMenu')" class="btn" style="background: #1b1c1d;">VOLVER</button></div></div>

    </div>

    <script>
        let coins = 0, player, currentPoints = 0, videoFin = false, lastTime = 0, checkTimer;
        const listadoVideos = [{ id: 'wC_sOpQjvWE', titulo: 'Ayuda Animal', puntos: 10 }];
        const listadoCanciones = [{ id: 'HL9VoQ-er_U', titulo: 'M√∫sica Social', puntos: 5 }];

        // VENTANA DE REGISTRO
        function solicitarRegistro() {
            Swal.fire({
                title: 'REGISTRO DE ID',
                html: `<input type="text" id="swal-input-name" class="swal2-input" placeholder="Nombre y Apellidos Reales" style="color:black; width:80%;">`,
                icon: 'info',
                confirmButtonText: 'ENTRAR',
                confirmButtonColor: '#2ecc71',
                allowOutsideClick: false,
                preConfirm: () => {
                    const name = document.getElementById('swal-input-name').value.trim();
                    if (name.length < 7) {
                        Swal.showValidationMessage('Ingresa nombre y apellidos completos');
                        return false;
                    }
                    return name;
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    window.userName = result.value;
                    nav('screenMenu');
                }
            });
        }

        function nav(id) {
            document.querySelectorAll('.screen').forEach(s => s.style.display = 'none');
            document.getElementById(id).style.display = 'flex';
            if(id === 'screenMusicList') renderList('musicListContainer', listadoCanciones);
            if(id === 'screenVideoList') renderList('videoListContainer', listadoVideos);
            document.getElementById('coinCount').innerText = coins;
            document.getElementById('coinCountTop').innerText = coins;
            document.getElementById('misPuntosRank').innerText = coins + " ü¶¥";
        }

        function toggleDataSaver() {
            if(!player) return;
            player.setPlaybackQuality(document.getElementById('dataSaver').checked ? 'small' : 'default');
        }

        function renderList(id, list) {
            const container = document.getElementById(id); container.innerHTML = '';
            list.forEach(item => {
                const div = document.createElement('div'); div.style = "padding:12px; border-bottom:1px solid #333; cursor:pointer; display:flex; justify-content:space-between; font-size:13px;";
                div.innerHTML = `<div><b>${item.titulo}</b></div><b>+${item.puntos} ü¶¥</b>`;
                div.onclick = () => cargarMision(item.id, item.puntos, item.titulo); container.appendChild(div);
            });
        }

        function cargarMision(id, pts, t) {
            currentPoints = pts; videoFin = false; lastTime = 0;
            document.getElementById('misionTitle').innerText = t;
            document.getElementById('labelUpload').style.display = 'none';
            nav('screenPlayer');
            if(player) player.loadVideoById(id);
            else player = new YT.Player('video-placeholder', { videoId: id, events: { 'onStateChange': onPlayerStateChange } });
            
            if(checkTimer) clearInterval(checkTimer);
            checkTimer = setInterval(() => {
                if (player && player.getCurrentTime) {
                    let currentTime = player.getCurrentTime();
                    if (currentTime > lastTime + 2) player.seekTo(lastTime);
                    else lastTime = currentTime;
                }
            }, 1000);
        }

        function onPlayerStateChange(e) {
            if(e.data === 0) { 
                videoFin = true; 
                clearInterval(checkTimer);
                document.getElementById('labelUpload').style.display='flex'; 
                document.getElementById('msgInstruccion').innerHTML = "‚úÖ ¬°Video completado!"; 
            } 
        }

        function abrirYoutube() { if(player && player.getVideoData) window.open('https://www.youtube.com/watch?v=' + player.getVideoData().video_id, '_blank'); }
        function validarTodo() { if(videoFin) { coins += currentPoints; nav('screenMenu'); } }
        function pararMision() { if(player) player.stopVideo(); clearInterval(checkTimer); nav('screenMenu'); }
    </script>
</body>
</html>

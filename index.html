<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AXON IMPACT GLOBAL</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://www.youtube.com/iframe_api"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        :root { 
            --primary: #2ecc71; 
            --bg-dark: rgba(13, 17, 23, 0.9); 
            --panel: rgba(22, 27, 34, 0.98); 
            --text: #e6edf3; 
            --music: #a333c8; 
            --video: #2185d0; 
            --gold: #fbbd08; 
            --red-yt: #ff0000; 
            --game: #db2828; 
            --task: #3498db; 
            --social: #767676; 
            --wallet: #fbbd08; 
            --invite: #34495e; 
            --airdrop: #f39c12;
            --donate: #e74c3c;
            --tg-color: #0088cc;
            --fb-color: #1877f2;
            --tk-color: #000000;
        }

        body, html { height: 100%; margin: 0; color: var(--text); font-family: 'Segoe UI', sans-serif; background: url('https://i.postimg.cc/pXMzbPsj/20260216-171012-0000.png') no-repeat center center fixed; background-size: cover; display: flex; justify-content: center; align-items: center; overflow: hidden; }
        .overlay-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-dark); z-index: 1; }
        .container { position: relative; z-index: 2; display: flex; flex-direction: column; align-items: center; width: 100%; }
        
        .panel { background: var(--panel); padding: 15px; border-radius: 30px; width: 85%; max-width: 400px; text-align: center; border: 1px solid rgba(46, 204, 113, 0.3); box-shadow: 0 15px 35px rgba(0,0,0,0.8); backdrop-filter: blur(10px); max-height: 92vh; overflow-y: auto; }
        
        /* PARCHE DE SEGURIDAD PARA BOTONES */
        .btn { 
            display: flex; align-items: center; justify-content: center; gap: 8px; width: 100%; padding: 12px; margin: 8px 0; border: none; border-radius: 18px; font-weight: bold; cursor: pointer; color: white; font-size: 13px; text-transform: uppercase; transition: transform 0.2s;
            user-select: none; 
            -webkit-tap-highlight-color: transparent; 
            touch-action: manipulation; 
        }
        .btn:active { transform: scale(0.96); }

        .country-stats { position: fixed; top: 10px; right: 10px; background: rgba(0,0,0,0.7); padding: 8px; border-radius: 12px; font-size: 10px; border: 1px solid var(--primary); z-index: 10; pointer-events: none; }
        .country-stats div { display: flex; justify-content: space-between; gap: 10px; margin-bottom: 2px; }

        .hero-img { width: 85%; max-width: 280px; height: 320px; object-fit: cover; border-radius: 40px; margin-bottom: -30px; z-index: 3; box-shadow: 0 0 35px rgba(46, 204, 113, 0.6); animation: pulse 3s infinite ease-in-out; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }

        .btn-video { background: var(--video); }
        .btn-music { background: var(--music); }
        .btn-social { background: var(--social); }
        .btn-wallet { background: var(--wallet); color: #000; }
        .btn-invite { background: var(--invite); }
        .btn-back { background: #1b1c1d; font-size: 10px; margin-top: 10px; padding: 8px; }
        .btn-airdrop { background: linear-gradient(145deg, #f39c12, #e67e22); border-bottom: 3px solid #d35400; height: 55px; }
        .btn-donate { background: linear-gradient(145deg, #e74c3c, #c0392b); border-bottom: 3px solid #962d22; height: 55px; }
        
        /* RANKING Y RACHA */
        .mini-card { background: rgba(255,255,255,0.05); padding: 10px; border-radius: 15px; margin: 10px 0; border: 1px solid rgba(46, 204, 113, 0.2); font-size: 11px; text-align: left; }
        .hero-row { display: flex; justify-content: space-between; padding: 4px 0; border-bottom: 1px solid rgba(255,255,255,0.05); }

        .balance-card { background: rgba(46, 204, 113, 0.05); border-radius: 20px; padding: 10px; margin-top: 15px; border: 1px dashed var(--primary); }
        .grid-match { display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; width: 320px; margin: 10px auto; background: rgba(0,0,0,0.5); padding: 8px; border-radius: 15px; border: 1px solid var(--primary); }
        .cell-match { width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; font-size: 20px; cursor: pointer; border-radius: 8px; background: rgba(255,255,255,0.05); transition: 0.2s; }
        #video-placeholder { width: 100%; aspect-ratio: 16/9; border-radius: 20px; background: #000; margin-bottom: 10px; }
        .screen { display: none; flex-direction: column; align-items: center; width: 100%; }
        .btn-yt-action { background: var(--red-yt); flex-direction: column; font-size: 11px; line-height: 1.3; }
        .btn-upload { background: var(--gold); color: #000; display: none; border: 2px solid #000; }
    </style>
</head>
<body>
    <div class="overlay-bg"></div>

    <div class="country-stats">
        <b style="color: var(--primary); display: block; margin-bottom: 4px;">USUARIOS HOY</b>
        <div><span>üá®üá¥ Colombia</span> <span>124</span></div>
        <div><span>üáªüá™ Venezuela</span> <span>89</span></div>
        <div><span>üá™üá∏ Espa√±a</span> <span>45</span></div>
        <div><span>üá≤üáΩ M√©xico</span> <span>67</span></div>
    </div>

    <div class="container">
        <div id="screenStart" class="screen" style="display: flex;">
            <img src="https://i.postimg.cc/pXMzbPsj/20260216-171012-0000.png" class="hero-img">
            <div class="panel" style="padding-top: 40px;">
                <h2 style="color: var(--primary); margin: 0; font-size: 20px;">AXON IMPACT GLOBAL</h2>
                <p style="font-size: 13px; line-height: 1.4; margin: 10px 0;">Ayudando a personas necesitadas y animales de la calle con Blockchain.</p>
                <button onclick="nav('screenMenu')" class="btn" style="background: var(--primary); font-size: 14px; position: relative; z-index: 999;">
                    ENTRAR A MISIONES
                </button>
            </div>
        </div>

        <div id="screenMenu" class="screen">
            <div class="panel">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                    <span style="font-size: 11px; color: var(--gold); font-weight: bold;"><i class="fa-solid fa-fire"></i> RACHA: 1 D√çAS</span>
                    <span style="font-size: 11px; color: var(--primary); font-weight: bold;"><span id="coinCountTop">0</span> ü¶¥</span>
                </div>

                <button onclick="nav('screenMatchGame')" class="btn" style="background: linear-gradient(45deg, #f1c40f, #d35400); border: 2px solid white;">
                    <i class="fa-solid fa-star"></i> JUGAR CANDY BITCOIN
                </button>

                <div class="mini-card">
                    <div style="color: var(--primary); font-weight: bold; margin-bottom: 5px; border-bottom: 1px solid var(--primary); text-align: center;">üèÜ TOP H√âROES DE LA SEMANA</div>
                    <div class="hero-row"><span>1. @Alex_Charity</span> <span>2,500 ü¶¥</span></div>
                    <div class="hero-row"><span>2. @Marta_Pets</span> <span>1,820 ü¶¥</span></div>
                    <div class="hero-row"><span>3. @Juan_Impact</span> <span>1,150 ü¶¥</span></div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                    <button onclick="alert('Pr√≥ximamente')" class="btn btn-airdrop">AIRDROP</button>
                    <button onclick="alert('¬°Gracias!')" class="btn btn-donate">DONAR</button>
                </div>

                <button onclick="nav('screenVideoList')" class="btn btn-video"><i class="fa-solid fa-video"></i> VIDEOS</button>
                <button onclick="nav('screenMusicList')" class="btn btn-music"><i class="fa-solid fa-music"></i> M√öSICA</button>
                <button onclick="nav('screenSocial')" class="btn btn-social"><i class="fa-solid fa-globe"></i> REDES SOCIALES</button>
                <button onclick="mostrarMiLink()" class="btn btn-invite"><i class="fa-solid fa-link"></i> INVITAR AMIGOS</button>
                
                <div class="balance-card">
                    <span style="font-size: 11px; opacity: 0.8;">TU SALDO TOTAL</span>
                    <div style="font-size: 28px; font-weight: bold; color: var(--primary);"><span id="coinCount">0</span> ü¶¥</div>
                </div>
            </div>
        </div>

        <div id="screenPlayer" class="screen">
            <div class="panel">
                <h3 id="misionTitle" style="font-size: 15px;">---</h3>
                <div id="video-placeholder"></div>
                <div style="margin-bottom: 10px;">
                    <label style="font-size: 10px; color: var(--primary); display: flex; align-items: center; justify-content: center; gap: 5px; cursor: pointer; user-select: none;">
                        <input type="checkbox" id="dataSaver" onchange="toggleDataSaver()"> üìâ AHORRO DE DATOS
                    </label>
                </div>
                <button id="btnInteract" class="btn btn-yt-action" onclick="abrirYoutube()">ABRIR YOUTUBE</button>
                <p id="msgInstruccion" style="font-size: 11px; color: var(--gold); padding: 5px; font-weight: bold;">‚ö†Ô∏è ¬°Like y Comenta! Sube captura al terminar.</p>
                <label for="fileProof" id="labelUpload" class="btn btn-upload"><i class="fa-solid fa-image"></i> CARGAR CAPTURA</label>
                <input type="file" id="fileProof" accept="image/*" onchange="validarTodo()" style="display:none;">
                <button onclick="pararMision()" class="btn btn-back">CANCELAR Y VOLVER</button>
            </div>
        </div>

        <div id="screenVideoList" class="screen"><div class="panel"><h3>VIDEOS</h3><div id="videoListContainer"></div><button onclick="nav('screenMenu')" class="btn btn-back">VOLVER</button></div></div>
        <div id="screenMusicList" class="screen"><div class="panel"><h3>M√öSICA</h3><div id="musicListContainer"></div><button onclick="nav('screenMenu')" class="btn btn-back">VOLVER</button></div></div>
        <div id="screenSocial" class="screen"><div class="panel"><h3>REDES</h3><button onclick="window.open('https://t.me/AxonImpact')" class="btn" style="background:#0088cc">TELEGRAM</button><button onclick="nav('screenMenu')" class="btn btn-back">VOLVER</button></div></div>
        <div id="screenMatchGame" class="screen"><div class="panel"><h3>CANDY BITCOIN</h3><div id="gridMatch" class="grid-match"></div><button onclick="nav('screenMenu')" class="btn btn-back">SALIR</button></div></div>

    </div>

    <script>
        let coins = 0, player, currentPoints = 0, videoFin = false, lastTime = 0, checkTimer;
        const listadoVideos = [{ id: 'wC_sOpQjvWE', titulo: 'La Plena', artista: 'Beele', puntos: 10 }];
        const listadoCanciones = [{ id: 'HL9VoQ-er_U', titulo: 'No tiene sentido', artista: 'Beele', puntos: 5 }];

        function nav(id) {
            document.querySelectorAll('.screen').forEach(s => s.style.display = 'none');
            document.getElementById(id).style.display = 'flex';
            if(id === 'screenMatchGame') initMatchGame();
            if(id === 'screenMusicList') renderList('musicListContainer', listadoCanciones);
            if(id === 'screenVideoList') renderList('videoListContainer', listadoVideos);
            document.getElementById('coinCount').innerText = coins;
            document.getElementById('coinCountTop').innerText = coins;
        }

        function toggleDataSaver() {
            if(!player) return;
            if(document.getElementById('dataSaver').checked) player.setPlaybackQuality('small');
            else player.setPlaybackQuality('default');
        }

        function renderList(id, list) {
            const container = document.getElementById(id); container.innerHTML = '';
            list.forEach(item => {
                const div = document.createElement('div'); div.style = "padding:8px; border-bottom:1px solid #333; cursor:pointer; display:flex; justify-content:space-between; font-size:12px;";
                div.innerHTML = `<div><b>${item.titulo}</b></div><b>+${item.puntos} ü¶¥</b>`;
                div.onclick = () => cargarMision(item.id, item.puntos, item.titulo); container.appendChild(div);
            });
        }

        function cargarMision(id, pts, t) {
            currentPoints = pts; videoFin = false; lastTime = 0;
            document.getElementById('misionTitle').innerText = t;
            document.getElementById('labelUpload').style.display = 'none';
            nav('screenPlayer');
            if(player) player.loadVideoById(id);
            else player = new YT.Player('video-placeholder', { videoId: id, events: { 'onStateChange': onPlayerStateChange } });

            if(checkTimer) clearInterval(checkTimer);
            checkTimer = setInterval(() => {
                if (player && player.getCurrentTime) {
                    let currentTime = player.getCurrentTime();
                    if (currentTime > lastTime + 2) player.seekTo(lastTime);
                    else lastTime = currentTime;
                }
            }, 1000);
        }

        function onPlayerStateChange(e) {
            if(e.data === 0) { 
                videoFin = true; 
                clearInterval(checkTimer);
                document.getElementById('labelUpload').style.display='flex'; 
                document.getElementById('msgInstruccion').innerHTML = "‚úÖ ¬°Listo! Sube tu captura."; 
            } 
        }

        function abrirYoutube() { if(player && player.getVideoData) window.open('https://www.youtube.com/watch?v=' + player.getVideoData().video_id, '_blank'); }
        function validarTodo() { if(videoFin) { coins += currentPoints; nav('screenMenu'); } }
        function mostrarMiLink() { navigator.clipboard.writeText(window.location.href); alert("Copiado"); }
        function pararMision() { if(player) player.stopVideo(); clearInterval(checkTimer); nav('screenMenu'); }
        function initMatchGame() { /* L√≥gica simplificada de juego */ }
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AXON - Impact Game</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://www.youtube.com/iframe_api"></script>
</head>
<body>
    <div id="registration" class="panel">
        <h2 id="welcomeTitle">AXON: RED DE IMPACTO ğŸ›¡ï¸</h2>
        <p id="missionText">Entrenando para ayudar a personas sin hogar y animales rescatados [cite: 2026-02-14]</p>
        
        <label id="termsLabel">
            <input type="checkbox" id="readTerms"> Acepto que los pagos dependen de la monetizaciÃ³n de YouTube (Estonia Law).
        </label>
        <button id="startButton" class="btn btn-primary" disabled>INICIAR ENTRENAMIENTO</button>
    </div>

    <div id="miniapppanel" class="panel" style="display:none;">
        <div id="player"></div>
        <div class="actions">
            <button id="validateCode" class="btn btn-success" style="display:none;" disabled>âœ… VALIDAR VICTORIA</button>
            <button id="donateButton" class="btn btn-danger">â¤ï¸ DONAR MONEDAS AL RESCATE</button>
        </div>
        <div class="stats">
            <div><span id="txtCoins">Monedas</span>: <span id="coins">0</span></div>
            <div><span id="txtLevel">Nivel</span>: <span id="level">1</span></div>
        </div>
    </div>

    <script>
        // --- CONFIGURACIÃ“N DE IDIOMAS Y TEXTOS ---
        const translations = {
            es: { title: "AXON: RED DE IMPACTO ğŸ›¡ï¸", mission: "Entrenando para ayudar a personas sin hogar y animales rescatados [cite: 2026-02-14]", start: "INICIAR ENTRENAMIENTO", done: "Â¡Video completado! Valida tu victoria.", donateMsg: "Â¡Gracias! DonaciÃ³n enviada para personas y animales [cite: 2026-02-14]" },
            en: { title: "AXON: IMPACT NETWORK ğŸ›¡ï¸", mission: "Training to help homeless people and rescued animals [cite: 2026-02-14]", start: "START TRAINING", done: "Video completed! Validate your victory.", donateMsg: "Thank you! Donation sent for people and animals [cite: 2026-02-14]" },
            ru: { title: "AXON: Ğ¡Ğ•Ğ¢Ğ¬ Ğ’Ğ›Ğ˜Ğ¯ĞĞ˜Ğ¯ ğŸ›¡ï¸", mission: "ĞŸĞ¾Ğ¼Ğ¾Ñ‰ÑŒ Ğ±ĞµĞ·Ğ´Ğ¾Ğ¼Ğ½Ñ‹Ğ¼ Ğ»ÑĞ´ÑĞ¼ Ğ¸ ÑĞ¿Ğ°ÑĞµĞ½Ğ½Ñ‹Ğ¼ Ğ¶Ğ¸Ğ²Ğ¾Ñ‚Ğ½Ñ‹Ğ¼ [cite: 2026-02-14]", start: "ĞĞĞ§ĞĞ¢Ğ¬ Ğ¢Ğ Ğ•ĞĞ˜Ğ ĞĞ’ĞšĞ£", done: "Ğ’Ğ¸Ğ´ĞµĞ¾ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¾! ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚Ğµ Ğ¿Ğ¾Ğ±ĞµĞ´Ñƒ.", donateMsg: "Ğ¡Ğ¿Ğ°ÑĞ¸Ğ±Ğ¾! ĞŸĞ¾Ğ¶ĞµÑ€Ñ‚Ğ²Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¾ [cite: 2026-02-14]" },
            ar: { title: "Ø´Ø¨ÙƒØ© AXON Ù„Ù„ØªØ£Ø«ÙŠØ± ğŸ›¡ï¸", mission: "Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø§Ù„Ù…Ø´Ø±Ø¯ÙŠÙ† ÙˆØ§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª Ø§Ù„ØªÙŠ ØªÙ… Ø¥Ù†Ù‚Ø§Ø°Ù‡Ø§ [cite: 2026-02-14]", start: "Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ¯Ø±ÙŠØ¨", done: "Ø§ÙƒØªÙ…Ù„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ! ØªØ­Ù‚Ù‚ Ù…Ù† ÙÙˆØ²Ùƒ.", donateMsg: "Ø´ÙƒØ±Ø§Ù‹! ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªØ¨Ø±Ø¹ Ù„Ù„Ù…Ø´Ø±Ø¯ÙŠÙ† ÙˆØ§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª [cite: 2026-02-14]" }
        };

        const userLang = navigator.language.split('-')[0] || 'en';
        const t = translations[userLang] || translations.en;

        // Aplicar textos traducidos
        document.getElementById('welcomeTitle').innerText = t.title;
        document.getElementById('missionText').innerText = t.mission;
        document.getElementById('startButton').innerText = t.start;

        // --- LÃ“GICA DE VIDEO Y BLOQUEO DE ADELANTO ---
        let player;
        let lastTime = 0;
        let videoEnded = false;
        let coins = 0;

        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                height: '360', width: '100%',
                videoId: 'TU_ID_DE_VIDEO', // <--- CAMBIA ESTO POR EL ID DE TU VIDEO
                playerVars: { 'controls': 0, 'disablekb': 1, 'rel': 0, 'modestbranding': 1, 'playsinline': 1 },
                events: { 'onStateChange': onPlayerStateChange, 'onReady': startAntiCheat }
            });
        }

        function startAntiCheat() {
            setInterval(() => {
                if (player && player.getCurrentTime) {
                    let curr = player.getCurrentTime();
                    if (curr > lastTime + 2) player.seekTo(lastTime);
                    else lastTime = curr;
                }
            }, 1000);
        }

        function onPlayerStateChange(e) {
            if (e.data === YT.PlayerState.ENDED) {
                videoEnded = true;
                const btn = document.getElementById('validateCode');
                btn.style.display = 'block';
                btn.disabled = false;
                alert(t.done);
            }
        }

        // --- FUNCIONES DE BOTONES ---
        document.getElementById('readTerms').onclick = (e) => {
            document.getElementById('startButton').disabled = !e.target.checked;
        };

        document.getElementById('startButton').onclick = () => {
            document.getElementById('registration').style.display = 'none';
            document.getElementById('miniapppanel').style.display = 'block';
        };

        document.getElementById('validateCode').onclick = () => {
            if (videoEnded) {
                coins += 10;
                document.getElementById('coins').innerText = coins;
                document.getElementById('validateCode').disabled = true;
                document.getElementById('validateCode').innerText = "âœ… VALIDADO";
            }
        };

        document.getElementById('donateButton').onclick = () => {
            if (coins > 0) {
                alert(t.donateMsg);
                coins = 0;
                document.getElementById('coins').innerText = "0";
            }
        };
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AXON IMPACT GLOBAL</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://www.youtube.com/iframe_api"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        :root { 
            --primary: #2ecc71; 
            --bg-dark: rgba(13, 17, 23, 0.9); 
            --panel: rgba(22, 27, 34, 0.98); 
            --text: #e6edf3; 
            --music: #a333c8; 
            --video: #2185d0; 
            --gold: #fbbd08; 
            --red-yt: #ff0000; 
            --game: #db2828; 
            --task: #3498db; 
            --social: #767676; 
            --wallet: #fbbd08; 
            --invite: #34495e; 
            --airdrop: #f39c12;
            --donate: #e74c3c;
            --tg-color: #0088cc;
            --fb-color: #1877f2;
            --tk-color: #000000;
        }

        body, html { height: 100%; margin: 0; color: var(--text); font-family: 'Segoe UI', sans-serif; background: url('https://i.postimg.cc/pXMzbPsj/20260216-171012-0000.png') no-repeat center center fixed; background-size: cover; display: flex; justify-content: center; align-items: center; overflow: hidden; }
        .overlay-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-dark); z-index: 1; }
        .container { position: relative; z-index: 2; display: flex; flex-direction: column; align-items: center; width: 100%; }
        
        .panel { background: var(--panel); padding: 15px; border-radius: 30px; width: 85%; max-width: 400px; text-align: center; border: 1px solid rgba(46, 204, 113, 0.3); box-shadow: 0 15px 35px rgba(0,0,0,0.8); backdrop-filter: blur(10px); max-height: 92vh; overflow-y: auto; }
        
        .country-stats { position: fixed; top: 10px; right: 10px; background: rgba(0,0,0,0.7); padding: 8px; border-radius: 12px; font-size: 10px; border: 1px solid var(--primary); z-index: 10; pointer-events: none; }
        .country-stats div { display: flex; justify-content: space-between; gap: 10px; margin-bottom: 2px; }

        .hero-img { width: 85%; max-width: 280px; height: 320px; object-fit: cover; border-radius: 40px; margin-bottom: -30px; z-index: 3; box-shadow: 0 0 35px rgba(46, 204, 113, 0.6); animation: pulse 3s infinite ease-in-out; }

        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }

        .btn { display: flex; align-items: center; justify-content: center; gap: 8px; width: 100%; padding: 12px; margin: 8px 0; border: none; border-radius: 18px; font-weight: bold; cursor: pointer; color: white; font-size: 13px; text-transform: uppercase; transition: transform 0.2s; }
        .btn i { font-size: 14px; }
        .btn:active { transform: scale(0.98); }

        .btn-video { background: var(--video); }
        .btn-music { background: var(--music); }
        .btn-social { background: var(--social); }
        .btn-wallet { background: var(--wallet); color: #000; }
        .btn-invite { background: var(--invite); }
        .btn-back { background: #1b1c1d; font-size: 10px; margin-top: 10px; padding: 8px; }

        .btn-airdrop { background: linear-gradient(145deg, #f39c12, #e67e22); border-bottom: 3px solid #d35400; height: 60px; }
        .btn-donate { background: linear-gradient(145deg, #e74c3c, #c0392b); border-bottom: 3px solid #962d22; height: 60px; }
        
        .btn-tg { background: var(--tg-color); }
        .btn-fb { background: var(--fb-color); }
        .btn-tk { background: var(--tk-color); border: 1px solid rgba(255,255,255,0.2); }

        .balance-card { background: rgba(46, 204, 113, 0.05); border-radius: 20px; padding: 10px; margin-top: 15px; border: 1px dashed var(--primary); }
        
        /* ESTILOS ESPEC√çFICOS DEL JUEGO TAP */
        .tap-area { width: 150px; height: 150px; background: radial-gradient(circle, var(--primary) 0%, #1a472a 100%); border-radius: 50%; margin: 15px auto; display: flex; align-items: center; justify-content: center; border: 6px solid var(--gold); cursor: pointer; transition: transform 0.1s; }
        .tap-area:active { transform: scale(0.92); }
        .tap-area img { width: 75%; border-radius: 50%; pointer-events: none; }
        .card-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 15px; padding-bottom: 20px; }
        .edu-card { background: rgba(255,255,255,0.05); border: 1px solid var(--primary); border-radius: 12px; padding: 8px; text-align: left; cursor: pointer; }
        .edu-card b { color: var(--gold); font-size: 10px; display: block; margin-bottom: 2px; }
        .edu-card small { font-size: 9px; opacity: 0.8; line-height: 1; display: block; }
        .card-price { color: var(--primary); font-weight: bold; font-size: 11px; margin-top: 4px; }

        #video-placeholder { width: 100%; aspect-ratio: 16/9; border-radius: 20px; background: #000; margin-bottom: 10px; }
        .screen { display: none; flex-direction: column; align-items: center; width: 100%; }
        .btn-yt-action { background: var(--red-yt); flex-direction: column; font-size: 11px; line-height: 1.3; }
        .btn-upload { background: var(--gold); color: #000; display: none; border: 2px solid #000; }
        
        @keyframes fadeOutUp { 0% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-50px); } }
    </style>
</head>
<body>
    <div class="overlay-bg"></div>

    <div class="country-stats">
        <b style="color: var(--primary); display: block; margin-bottom: 4px;">USUARIOS HOY</b>
        <div><span>üá®üá¥ Colombia</span> <span>124</span></div>
        <div><span>üáªüá™ Venezuela</span> <span>89</span></div>
        <div><span>üá™üá∏ Espa√±a</span> <span>45</span></div>
        <div><span>üá≤üáΩ M√©xico</span> <span>67</span></div>
    </div>

    <div class="container">
        
        <div id="screenStart" class="screen" style="display: flex;">
            <img src="https://i.postimg.cc/pXMzbPsj/20260216-171012-0000.png" class="hero-img">
            <div class="panel" style="padding-top: 40px;">
                <h2 style="color: var(--primary); margin: 0; font-size: 20px;">AXON IMPACT GLOBAL</h2>
                <p style="font-size: 13px; line-height: 1.4; margin: 10px 0;">Ayudando a personas necesitadas y animales de la calle con Blockchain.</p>
                <button onclick="nav('screenMenu')" class="btn" style="background: var(--primary); font-size: 14px;">ENTRAR A MISIONES</button>
            </div>
        </div>

        <div id="screenMenu" class="screen">
            <div class="panel">
                <h3 style="margin-bottom: 15px; font-size: 16px;">MISIONES ACTIVAS ü¶¥</h3>
                
                <button onclick="nav('screenGame')" class="btn" style="background: linear-gradient(135deg, var(--primary), #1a472a); border: 2px solid var(--gold);">
                    <i class="fa-solid fa-gamepad"></i> JUGAR: AXON JOURNEY
                </button>

                <button onclick="alert('Pr√≥ximamente: Cobro de Airdrop')" class="btn btn-airdrop">
                    <i class="fa-solid fa-coins"></i> COBRAR AIRDROP
                </button>
                <button onclick="alert('¬°Gracias por tu apoyo!')" class="btn btn-donate">
                    <i class="fa-solid fa-heart"></i> DONAR GANANCIAS
                </button>

                <div class="donors-list">
                    <div style="font-weight: bold; margin-bottom: 5px; color: var(--primary); text-align: center; font-size: 11px;">√öLTIMAS DONACIONES (TG)</div>
                    <div class="donor-row"><span>@User_Telegram1</span> <span>150 ü¶¥</span></div>
                    <div class="donor-row"><span>@CryptoHelp</span> <span>500 ü¶¥</span></div>
                </div>

                <div style="margin: 15px 0; border-top: 1px solid rgba(255,255,255,0.1);"></div>

                <button onclick="nav('screenVideoList')" class="btn btn-video"><i class="fa-solid fa-video"></i> VIDEOS</button>
                <button onclick="nav('screenMusicList')" class="btn btn-music"><i class="fa-solid fa-music"></i> M√öSICA</button>
                <button onclick="nav('screenSocial')" class="btn btn-social"><i class="fa-solid fa-globe"></i> REDES SOCIALES</button>
                <button onclick="alert('Vincula tu Wallet')" class="btn btn-wallet"><i class="fa-solid fa-gem"></i> VINCULAR WALLET</button>
                <button onclick="mostrarMiLink()" class="btn btn-invite"><i class="fa-solid fa-link"></i> INVITAR AMIGOS</button>
                
                <div class="balance-card">
                    <span style="font-size: 11px; opacity: 0.8;">TU SALDO TOTAL</span>
                    <div style="font-size: 28px; font-weight: bold; color: var(--primary);"><span id="coinCount">0</span> ü¶¥</div>
                </div>
            </div>
        </div>

        <div id="screenGame" class="screen">
            <div class="panel">
                <h2 id="userRank" style="color: var(--gold); font-size: 16px; margin: 0;">Nivel 1: Voluntario Novato üêæ</h2>
                <div class="balance-card" style="margin: 10px 0;">
                    <div style="font-size: 24px; font-weight: bold; color: var(--primary);"><span id="gameCoinCount">0</span> ü¶¥</div>
                </div>

                <div class="tap-area" onclick="gameTap(event)">
                    <img src="https://i.postimg.cc/pXMzbPsj/20260216-171012-0000.png">
                </div>

                <div class="card-grid">
                    <div class="edu-card" onclick="buyCard('Brokers', 150, 'Reg√≠strate en Binance o Bybit usando KYC y 2FA.', 1)">
                        <b>REGISTRO BROKER</b>
                        <small>Binance y Bybit inicial.</small>
                        <div class="card-price">150 ü¶¥</div>
                    </div>
                    <div class="edu-card" onclick="buyCard('Lutero', 500, 'Lutero separ√≥ Iglesia de Estado. BTC separa Dinero de Estado.', 2)">
                        <b>FILOSOF√çA LUTERO</b>
                        <small>Libertad financiera.</small>
                        <div class="card-price">500 ü¶¥</div>
                    </div>
                    <div class="edu-card" onclick="buyCard('Jade', 1500, 'Jade es Open Source y usa Liquid Network.', 3)">
                        <b>JADE WALLET</b>
                        <small>Hardware de seguridad.</small>
                        <div class="card-price">1500 ü¶¥</div>
                    </div>
                    <div class="edu-card" onclick="buyCard('TimeLock', 5000, 'Bloquea tus BTC para el futuro. Patrimonio real.', 4)">
                        <b>TIME LOCK</b>
                        <small>Ahorro generacional.</small>
                        <div class="card-price">5000 ü¶¥</div>
                    </div>
                </div>

                <button onclick="nav('screenMenu')" class="btn btn-back">VOLVER AL MEN√ö</button>
            </div>
        </div>

        <div id="screenVideoList" class="screen">
            <div class="panel">
                <h3 style="color: var(--video); font-size: 16px;">BIBLIOTECA DE VIDEOS</h3>
                <div id="videoListContainer" style="max-height: 250px; overflow-y: auto;"></div>
                <button onclick="nav('screenMenu')" class="btn btn-back">VOLVER AL MEN√ö</button>
            </div>
        </div>

        <div id="screenMusicList" class="screen">
            <div class="panel">
                <h3 style="color: var(--music); font-size: 16px;">BIBLIOTECA MUSICAL</h3>
                <div id="musicListContainer" style="max-height: 200px; overflow-y: auto;"></div>
                <button onclick="nav('screenMenu')" class="btn btn-back">VOLVER AL MEN√ö</button>
            </div>
        </div>

        <div id="screenSocial" class="screen">
            <div class="panel">
                <h3 style="font-size: 16px;">NUESTRAS REDES</h3>
                <button onclick="window.open('https://t.me/TuCanal', '_blank')" class="btn btn-tg"><i class="fa-brands fa-telegram"></i> TELEGRAM</button>
                <button onclick="window.open('https://facebook.com/TuPagina', '_blank')" class="btn btn-fb"><i class="fa-brands fa-facebook"></i> FACEBOOK</button>
                <button onclick="window.open('https://tiktok.com/@TuUsuario', '_blank')" class="btn btn-tk"><i class="fa-brands fa-tiktok"></i> TIKTOK</button>
                <button onclick="nav('screenMenu')" class="btn btn-back">VOLVER</button>
            </div>
        </div>

        <div id="screenPlayer" class="screen">
            <div class="panel">
                <h3 id="misionTitle" style="font-size: 15px;">---</h3>
                <div id="video-placeholder"></div>
                <button id="btnInteract" class="btn btn-yt-action">
                    <span>ABRIR YOUTUBE PARA INTERACTUAR</span>
                </button>
                <p id="msgInstruccion" style="font-size: 10px; color: var(--gold); font-weight: bold;">
                    ‚ö†Ô∏è ¬°LIKE, COMENTA y COMPARTE! Ve a Youtube toma screenshot y c√°rgalo al finalizar el v√≠deo.
                </p>
                <label for="fileProof" id="labelUpload" class="btn btn-upload"><i class="fa-solid fa-image"></i> CARGAR CAPTURA</label>
                <input type="file" id="fileProof" accept="image/*" onchange="validarTodo()" style="display:none;">
                <button onclick="pararMision()" class="btn btn-back">CANCELAR Y VOLVER</button>
            </div>
        </div>
    </div>

    <script>
        const listadoVideos = [{ id: 'wC_sOpQjvWE', titulo: 'La Plena', artista: 'Beele', puntos: 10 }];
        const listadoCanciones = [{ id: 'HL9VoQ-er_U', titulo: 'No tiene sentido', artista: 'Beele', puntos: 5 }];

        let player, currentPoints = 0, coins = 0, videoFin = false;
        let userLevel = 1, cardsPurchased = 0;

        function nav(id) {
            document.querySelectorAll('.screen').forEach(s => s.style.display = 'none');
            const target = document.getElementById(id);
            if(target) target.style.display = 'flex';
            if(id === 'screenMusicList') renderList('musicListContainer', listadoCanciones, 'item-music');
            if(id === 'screenVideoList') renderList('videoListContainer', listadoVideos, 'item-video');
            updateCoinDisplay();
        }

        function renderList(containerId, list, extraClass) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            list.forEach(item => {
                const div = document.createElement('div');
                div.className = `list-item ${extraClass}`;
                div.style.padding = '10px'; div.style.borderBottom = '1px solid rgba(255,255,255,0.1)';
                div.style.display = 'flex'; div.style.justifyContent = 'space-between';
                div.innerHTML = `<div><b>${item.titulo}</b><br><small>${item.artista}</small></div><b>+${item.puntos} ü¶¥</b>`;
                div.onclick = () => cargarMision(item.id, item.puntos, `${item.artista} - ${item.titulo}`);
                container.appendChild(div);
            });
        }

        // L√ìGICA DEL JUEGO
        function gameTap(event) {
            coins += 1;
            updateCoinDisplay();
            const p = document.createElement('div');
            p.innerText = '+1 ü¶¥'; p.style.position = 'fixed';
            p.style.left = `${event.clientX}px`; p.style.top = `${event.clientY}px`;
            p.style.color = 'var(--primary)'; p.style.fontWeight = 'bold';
            p.style.animation = 'fadeOutUp 0.8s forwards';
            document.body.appendChild(p);
            setTimeout(() => p.remove(), 800);
        }

        function buyCard(titulo, costo, leccion, cardLevel) {
            if (userLevel < cardLevel) {
                Swal.fire('Bloqueado', 'Sube de nivel para esta tarjeta.', 'error');
                return;
            }
            if (coins >= costo) {
                coins -= costo;
                cardsPurchased++;
                updateCoinDisplay();
                checkLevelUp();
                Swal.fire(titulo, leccion, 'success');
            } else {
                Swal.fire('Huesitos Insuficientes', 'Sigue haciendo tap para ayudar.', 'info');
            }
        }

        function checkLevelUp() {
            let r = document.getElementById('userRank');
            if(cardsPurchased >= 2 && userLevel == 1) { userLevel = 2; r.innerText = "Nivel 2: Rescatista de Valor üõ°Ô∏è"; }
            if(cardsPurchased >= 4 && userLevel == 2) { userLevel = 3; r.innerText = "Nivel 3: Guardi√°n de Semillas üîë"; }
        }

        function updateCoinDisplay() {
            document.getElementById('coinCount').innerText = Math.floor(coins);
            const g = document.getElementById('gameCoinCount');
            if(g) g.innerText = Math.floor(coins);
        }

        function cargarMision(videoId, pts, titulo) {
            currentPoints = pts; videoFin = false;
            document.getElementById('misionTitle').innerText = titulo;
            document.getElementById('labelUpload').style.display = 'none';
            document.getElementById('btnInteract').onclick = () => window.open(`https://www.youtube.com/watch?v=${videoId}`, '_blank');
            nav('screenPlayer');
            if (player) player.loadVideoById(videoId);
            else player = new YT.Player('video-placeholder', {
                height: '100%', width: '100%', videoId: videoId,
                events: { 'onStateChange': (e) => { if (e.data === YT.PlayerState.ENDED) { 
                    videoFin = true; 
                    document.getElementById('labelUpload').style.display = 'flex';
                }}}
            });
        }

        function validarTodo() {
            if (!videoFin) return;
            alert("Validando captura... ü¶¥");
            setTimeout(() => { coins += currentPoints; updateCoinDisplay(); nav('screenMenu'); }, 2000);
        }

        function mostrarMiLink() {
            navigator.clipboard.writeText(window.location.href);
            alert("Link de invitaci√≥n copiado.");
        }

        function pararMision() { if(player) player.stopVideo(); nav('screenMenu'); }
    </script>
</body>
</html>

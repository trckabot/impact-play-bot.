<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>AXON IMPACT GLOBAL</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://www.youtube.com/iframe_api"></script>

<style>
:root{
 --primary:#2ecc71;
 --panel:#161b22;
 --text:#e6edf3;
 --video:#2185d0;
 --music:#a333c8;
 --peticiones:#e91e63;
 --donar:#e67e22;
 --gold:#fbbd08;
}

body,html{
 height:100%;
 margin:0;
 font-family:'Segoe UI',sans-serif;
 color:var(--text);
 background:url('https://i.postimg.cc/pXMzbPsj/20260216-171012-0000.png') no-repeat center center fixed;
 background-size:cover;
 display:flex;
 justify-content:center;
 align-items:center;
 overflow:hidden;
}

.overlay-bg{
 position:fixed;
 width:100%;
 height:100%;
 background:rgba(0,0,0,0.6);
}

.container{
 position:relative;
 z-index:2;
 width:100%;
 display:flex;
 flex-direction:column;
 align-items:center;
}

.panel{
 background:var(--panel);
 padding:20px;
 border-radius:30px;
 width:85%;
 max-width:420px;
 border:2px solid var(--primary);
 box-shadow:0 0 25px rgba(46,204,113,0.5);
 max-height:85vh;
 overflow-y:auto;
}

.btn{
 width:100%;
 padding:14px;
 margin:8px 0;
 border:none;
 border-radius:20px;
 font-weight:bold;
 cursor:pointer;
 color:white;
 text-transform:uppercase;
}

.screen{display:none; width:100%; justify-content:center;}

.admin-floating{
 position:fixed;
 right:15px;
 bottom:15px;
 background:#161b22;
 padding:15px;
 border-radius:20px;
 box-shadow:0 0 20px var(--primary);
 font-size:12px;
}
</style>
</head>

<body>
<div class="overlay-bg"></div>
<div class="container">

<!-- INICIO -->
<div id="screenStart" class="screen" style="display:flex;">
<div class="panel">
<h2 id="axonTitle" style="color:var(--primary);cursor:pointer;">AXON IMPACT GLOBAL</h2>
<button onclick="registrar()" class="btn" style="background:var(--primary);">UNIRSE</button>
</div>
</div>

<!-- MENU -->
<div id="screenMenu" class="screen">
<div class="panel">
<h3 id="userName"></h3>
<div>Saldo: <span id="coins">0</span> ðŸ¦´</div>
<button onclick="nav('screenVideos')" class="btn" style="background:var(--video);">CARPETA VIDEOS</button>
<button onclick="nav('screenMusic')" class="btn" style="background:var(--music);">CARPETA MUSICA</button>
</div>
</div>

<!-- VIDEOS -->
<div id="screenVideos" class="screen">
<div class="panel">
<h3>Misiones</h3>
<div id="videoList"></div>
<button onclick="nav('screenMenu')" class="btn" style="background:#333;">VOLVER</button>
</div>
</div>

<!-- PLAYER -->
<div id="screenPlayer" class="screen">
<div class="panel">
<h4 id="missionTitle"></h4>
<div id="video-placeholder" style="width:100%;aspect-ratio:16/9;background:black;border-radius:15px;"></div>

<button onclick="abrirYoutube()" class="btn" style="background:red;">ABRIR YOUTUBE</button>

<button id="btnReward" onclick="recompensa()" class="btn" style="background:var(--gold);color:black;" disabled>SUBIR SCREENSHOT</button>

<div style="font-size:11px;margin-top:6px;color:#ccc;">
Abre YouTube, dale like y comenta.  
Sube screenshot, una IA verificarÃ¡ la imagen.
</div>

<button onclick="nav('screenMenu')" class="btn" style="background:#333;">VOLVER</button>
</div>
</div>

<!-- MUSICA -->
<div id="screenMusic" class="screen">
<div class="panel">
<h3>Carpeta MÃºsica</h3>

<input type="text" id="searchMusic" placeholder="Buscar..." onkeyup="filtrarMusica()" style="width:100%;padding:8px;border-radius:10px;margin-bottom:8px;">

<div id="musicList" style="max-height:120px;overflow:auto;"></div>

<textarea id="musicRequest" placeholder="Ejemplo: Artista - CanciÃ³n" style="width:100%;margin-top:8px;height:60px;"></textarea>
<button onclick="enviarPeticion()" class="btn" style="background:var(--peticiones);">ENVIAR</button>

<button onclick="nav('screenMenu')" class="btn" style="background:#333;">VOLVER</button>
</div>
</div>

<!-- ADMIN -->
<div id="screenAdmin" class="screen">
<div class="panel">
<h3>ADMINISTRACION</h3>
<div id="adminData"></div>
<button onclick="nav('screenMenu')" class="btn" style="background:#333;">VOLVER</button>
</div>
</div>

</div>

<script>
let coins=0;
let nombre="";
let pais="Desconocido";
let player=null;
let currentVideo="";
let currentReward=0;
let lastTime=0;
let ultimaPeticion=0;

// ECUACION EDITABLE
let CPM=2.5;
let FACTOR_PAIS=1;
let FACTOR_DONACION=0.1;

function calcularPago(vistas,donacion){
 return ((vistas/1000)*CPM)*FACTOR_PAIS+(donacion*FACTOR_DONACION);
}

// DETECTAR PAIS
fetch("https://ipapi.co/json/")
.then(r=>r.json())
.then(d=>pais=d.country_name);

// REGISTRO
function registrar(){
 Swal.fire({title:"Tu nombre",input:"text"}).then(r=>{
   if(r.value){
     nombre=r.value;
     localStorage.setItem("nombre",nombre);
     iniciar();
   }
 });
}

function iniciar(){
 nombre=localStorage.getItem("nombre");
 document.getElementById("userName").innerText="HÃ©roe: "+nombre;
 nav("screenMenu");
}

// NAVEGACION
function nav(id){
 document.querySelectorAll(".screen").forEach(s=>s.style.display="none");
 document.getElementById(id).style.display="flex";
 if(id==="screenVideos") renderVideos();
 if(id==="screenMusic") renderMusica();
 if(id==="screenAdmin") cargarAdmin();
}

// VIDEOS
let misiones=[
{id:"wC_sOpQjvWE",titulo:"Rescate Animal",reward:500},
{id:"HL9VoQ-er_U",titulo:"MisiÃ³n Social",reward:300}
];

function renderVideos(){
 let c=document.getElementById("videoList");
 c.innerHTML="";
 misiones.forEach(m=>{
  c.innerHTML+=`<div style="padding:10px;border-bottom:1px solid #333;cursor:pointer;"
  onclick="abrirMision('${m.id}',${m.reward},'${m.titulo}')">
  ${m.titulo} - <b>${m.reward} ðŸ¦´</b></div>`;
 });
}

function abrirMision(id,reward,title){
 currentVideo=id;
 currentReward=reward;
 document.getElementById("missionTitle").innerText=title;
 nav("screenPlayer");
 if(player) player.destroy();
 player=new YT.Player('video-placeholder',{
  videoId:id,
  events:{onStateChange:onPlayerStateChange}
 });
}

// ANTI ADELANTO
function onPlayerStateChange(e){
 if(e.data==YT.PlayerState.PLAYING){
  setInterval(()=>{
   let t=player.getCurrentTime();
   if(t-lastTime>2){player.seekTo(lastTime);}
   lastTime=t;
  },1000);
 }
 if(e.data===0){
  document.getElementById("btnReward").disabled=false;
 }
}

function abrirYoutube(){
 window.open("https://youtube.com/watch?v="+currentVideo);
}

function recompensa(){
 coins+=currentReward;
 document.getElementById("coins").innerText=coins;
 Swal.fire("Recompensa recibida","+ "+currentReward+" ðŸ¦´","success");
 nav("screenMenu");
}

// MUSICA
let musica=[
{artista:"Imagine Dragons",nombre:"Believer",link:"https://youtube.com/"},
{artista:"Karol G",nombre:"Provenza",link:"https://youtube.com/"}
];

function renderMusica(){
 let c=document.getElementById("musicList");
 c.innerHTML="";
 musica.forEach(m=>{
  c.innerHTML+=`<div style="padding:6px;border-bottom:1px solid #333;">
  ${m.artista} - ${m.nombre}
  <button onclick="window.open('${m.link}')">â–¶</button></div>`;
 });
}

function filtrarMusica(){
 let v=document.getElementById("searchMusic").value.toLowerCase();
 let c=document.getElementById("musicList");
 c.innerHTML="";
 musica.filter(m=>(m.artista+m.nombre).toLowerCase().includes(v))
 .forEach(m=>{
  c.innerHTML+=`${m.artista} - ${m.nombre}<br>`;
 });
}

// ANTI SPAM
function enviarPeticion(){
 let ahora=Date.now();
 if(ahora-ultimaPeticion<60000){
  Swal.fire("Espera 1 minuto");
  return;
 }
 ultimaPeticion=ahora;
 Swal.fire("Enviado","PeticiÃ³n guardada","success");
}

// ADMIN
let clickCount=0;
document.getElementById("axonTitle").onclick=()=>{
 clickCount++;
 if(clickCount>=5){
  Swal.fire({title:"Password",input:"password"}).then(r=>{
   if(r.value==="1234"){nav("screenAdmin");}
  });
  clickCount=0;
 }
};

function cargarAdmin(){
 document.getElementById("adminData").innerHTML=
 `PaÃ­s actual usuario: ${pais}<br>Total Coins entregadas: ${coins}`;
}

window.onload=()=>{
 if(localStorage.getItem("nombre")) iniciar();
};
</script>

</body>
</html>
